<view class="atd-map">
  <!-- 头部tab栏 导航方式-->
  <view a:if="{{showSearchTypeTab}}" class="atd-top-tabs">
    <block a:for="{{searchTypeData}}">
      <view data-index="{{item.id}}" key="tabs-item-{{index}}" onTap="onSearchType" style="{{backgroundColor: tabBarBackgroundColor,color: item.isCheck===1 ? tabBarActiveTextColor: tabBarInactiveTextColor,width: (tabBardata.length > 3 ? 0.25 : 1 / tabBardata.length) * 100 + '%',}}" class="atd-tabs-bar-tab">
        <view onTap="onTabClick" class="atd-tabs-bar-title" style="{{ borderBottomColor: item.isCheck===1 ? tabBarUnderlineColor : '' }}"> {{item.type}}</view>
      </view>
    </block>
  </view>
  <!--  左下菜单栏 -->
  <view class="atd-left-nav" a:if="{{MenuShow}}" a:if="{{!showRouteBox}}">
    <menu markers="{{markers}}" selectMarkers="{{selectMarkers}}" onTypeClick="onTypeClick" onCancelType="onCancelType"/>
  </view>
  <!-- 定位 -->
  <view a:if="{{MenuShow}}" class="atd-icon-tolocation {{bgchange?'show':'hidden'}}" onTap="moveTolocation" a:if="{{!showRouteBox}}">
  </view>
  <!-- 点击景点的浮层 -->
  <b-card onCloseCard="onCloseCard" show="{{bottomCardShow}}" data="{{cardData}}" onNavigation="onNavigation"/>
  <!-- 地图 -->
  <map id="map" scale="{{scale}}" longitude="{{longitude}}" latitude="{{latitude}}" controls="{{controls}}" markers="{{selectMarkers.length ? selectMarkers : markers}}" onMarkerTap="markertap"
      polyline = "{{polyline}}" circles="{{circles}}" onRegionChange="onRegionChange" 
      show-location="{{true}}" style="height: 100vh;">
  </map>
  <!-- 线路浮层 -->
  <view a:if="{{showRouteBox}}" class="atd-list-box" style="height:{{boxHeightChange?boxHeight:300}}px">
    <view class="atd-scroll-view_H ">
      <view class="atd-top-box" hover-class="atd-top-click" hover-stay-time=100 onTap="backout">
        <text> 退出
        </text>
      </view>
      <view class="atd-top-box" hover-class="atd-top-click" hover-stay-time=100 onTap="showMore">
        <text> 展开
        </text>
      </view>
    </view>
    <view>
      <scroll-view class="atd-scroll-view_H" scroll-x="{{true}}" class="atd-sc" onScrollToUpper="upper" onScrollToLower="lower" onScroll="scroll" scroll-into-view="{{toView}}" scroll-top="{{scrollTop}}">
        <block a:for="{{routeShow}}">
          <view class="atd-scroll-view-item_H atd-scroll-view-item-box  {{item.isChoose == 1 ? 'is-choose' : ''}}" onTap="chooseRoute" data-value="{{item}}">
            <view >
              <text>{{item.route}}
              </text>
            </view>
            <view >
              <text class="atd-scroll-view-item-text">{{item.routeTotal}}个景点|约{{item.costsTime}}小时
              </text>
            </view>
          </view>
        </block>
      </scroll-view>
    </view>
    <scroll-view scroll-y="{{true}}" style="height:{{boxHeightChange?boxHeight-100:200}}px" onScrollToUpper="upper" onScrollToLower="lower" onScroll="scroll" scroll-into-view="{{toView}}" scroll-top="{{scrollTop}}">
      <steps onChoose="onNavigation" onTapname="tapName" chooseData="{{chooseData}}">
      </steps>
    </scroll-view>
  </view>
</view>