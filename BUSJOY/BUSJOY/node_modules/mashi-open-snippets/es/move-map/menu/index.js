Component({
  mixins: [],
  data: {
    typeData: [],
    typeShow: false
  },
  props: {
    markers: [],
    selectMarkers: [],
    onTypeClick: function onTypeClick() {},
    onCancelType: function onCancelType() {}
  },
  didUpdate: function didUpdate(prevProps) {
    if (prevProps.markers.length !== this.props.markers.length) {
      var markers = this.props.markers;
      var typeData = this.data.typeData;
      var temp = [];
      markers.forEach(function (item) {
        if (item.type && item.type.value && temp.indexOf(item.type.value) === -1) {
          temp.push(item.type.value);
          typeData.push(item.type);
        }
      });
      this.setData({
        typeData: typeData
      });
    }
  },
  methods: {
    /**
     * 点击了类别中的内容
     * @method onTypeClick
     * @param {*} e
     */
    onTypeClick: function onTypeClick(e) {
      var type = e.target.dataset.type;
      this.props.onTypeClick(type);
      this.setData({
        typeShow: false
      });
    },

    /**
     * 点击类别显示popover
     * @method onShowTypePopover
     */
    onShowTypePopover: function onShowTypePopover() {
      this.setData({
        typeShow: !this.data.typeShow
      });
    },

    /**
     * 点击了取消筛选
     * @method onCancel
     */
    onCancel: function onCancel() {
      this.props.onCancelType();
    }
  }
});